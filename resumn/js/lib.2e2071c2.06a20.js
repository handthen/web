"use strict";(self.webpackChunkwebpack=self.webpackChunkwebpack||[]).push([[564],{56124:(e,t,i)=>{i.d(t,{A:()=>V});var n=i(5544),r=i(89379),a=i(80045),s=i(60436),l=i(92901),o=i(23029),u=i(68210),d=i(96540),c=i(71258),h=i(98999),f=i(20488),g=i(35611),v=i(18424),F=i(56150),p=["name"],m=(0,l.A)((function e(t){var i=this;(0,o.A)(this,e),this.formHooked=!1,this.forceRootUpdate=void 0,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:i.getFieldValue,getFieldsValue:i.getFieldsValue,getFieldError:i.getFieldError,getFieldWarning:i.getFieldWarning,getFieldsError:i.getFieldsError,isFieldsTouched:i.isFieldsTouched,isFieldTouched:i.isFieldTouched,isFieldValidating:i.isFieldValidating,isFieldsValidating:i.isFieldsValidating,resetFields:i.resetFields,setFields:i.setFields,setFieldValue:i.setFieldValue,setFieldsValue:i.setFieldsValue,validateFields:i.validateFields,submit:i.submit,_init:!0,getInternalHooks:i.getInternalHooks}},this.getInternalHooks=function(e){return e===c.c?(i.formHooked=!0,{dispatch:i.dispatch,initEntityValue:i.initEntityValue,registerField:i.registerField,useSubscribe:i.useSubscribe,setInitialValues:i.setInitialValues,destroyForm:i.destroyForm,setCallbacks:i.setCallbacks,setValidateMessages:i.setValidateMessages,getFields:i.getFields,setPreserve:i.setPreserve,getInitialValue:i.getInitialValue,registerWatch:i.registerWatch}):((0,u.Ay)(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(e){i.subscribable=e},this.prevWithoutPreserves=null,this.setInitialValues=function(e,t){if(i.initialValues=e||{},t){var n,r=(0,f.h)(e,i.store);null===(n=i.prevWithoutPreserves)||void 0===n||n.map((function(t){var i=t.key;r=(0,F.KY)(r,i,(0,F._W)(e,i))})),i.prevWithoutPreserves=null,i.updateStore(r)}},this.destroyForm=function(){var e=new v.A;i.getFieldEntities(!0).forEach((function(t){i.isMergedPreserve(t.isPreserve())||e.set(t.getNamePath(),!0)})),i.prevWithoutPreserves=e},this.getInitialValue=function(e){var t=(0,F._W)(i.initialValues,e);return e.length?(0,f.h)(t):t},this.setCallbacks=function(e){i.callbacks=e},this.setValidateMessages=function(e){i.validateMessages=e},this.setPreserve=function(e){i.preserve=e},this.watchList=[],this.registerWatch=function(e){return i.watchList.push(e),function(){i.watchList=i.watchList.filter((function(t){return t!==e}))}},this.notifyWatch=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(i.watchList.length){var t=i.getFieldsValue(),n=i.getFieldsValue(!0);i.watchList.forEach((function(i){i(t,n,e)}))}},this.timeoutId=null,this.warningUnhooked=function(){0},this.updateStore=function(e){i.store=e},this.getFieldEntities=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?i.fieldEntities.filter((function(e){return e.getNamePath().length})):i.fieldEntities},this.getFieldsMap=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new v.A;return i.getFieldEntities(e).forEach((function(e){var i=e.getNamePath();t.set(i,e)})),t},this.getFieldEntitiesForNamePathList=function(e){if(!e)return i.getFieldEntities(!0);var t=i.getFieldsMap(!0);return e.map((function(e){var i=(0,F.XK)(e);return t.get(i)||{INVALIDATE_NAME_PATH:(0,F.XK)(e)}}))},this.getFieldsValue=function(e,t){if(i.warningUnhooked(),!0===e&&!t)return i.store;var n=i.getFieldEntitiesForNamePathList(Array.isArray(e)?e:null),r=[];return n.forEach((function(i){var n,a="INVALIDATE_NAME_PATH"in i?i.INVALIDATE_NAME_PATH:i.getNamePath();if(e||!(null===(n=i.isListField)||void 0===n?void 0:n.call(i)))if(t){var s="getMeta"in i?i.getMeta():null;t(s)&&r.push(a)}else r.push(a)})),(0,F.fm)(i.store,r.map(F.XK))},this.getFieldValue=function(e){i.warningUnhooked();var t=(0,F.XK)(e);return(0,F._W)(i.store,t)},this.getFieldsError=function(e){return i.warningUnhooked(),i.getFieldEntitiesForNamePathList(e).map((function(t,i){return t&&!("INVALIDATE_NAME_PATH"in t)?{name:t.getNamePath(),errors:t.getErrors(),warnings:t.getWarnings()}:{name:(0,F.XK)(e[i]),errors:[],warnings:[]}}))},this.getFieldError=function(e){i.warningUnhooked();var t=(0,F.XK)(e);return i.getFieldsError([t])[0].errors},this.getFieldWarning=function(e){i.warningUnhooked();var t=(0,F.XK)(e);return i.getFieldsError([t])[0].warnings},this.isFieldsTouched=function(){i.warningUnhooked();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,a=t[0],l=t[1],o=!1;0===t.length?r=null:1===t.length?Array.isArray(a)?(r=a.map(F.XK),o=!1):(r=null,o=a):(r=a.map(F.XK),o=l);var u=i.getFieldEntities(!0),d=function(e){return e.isFieldTouched()};if(!r)return o?u.every(d):u.some(d);var c=new v.A;r.forEach((function(e){c.set(e,[])})),u.forEach((function(e){var t=e.getNamePath();r.forEach((function(i){i.every((function(e,i){return t[i]===e}))&&c.update(i,(function(t){return[].concat((0,s.A)(t),[e])}))}))}));var h=function(e){return e.some(d)},f=c.map((function(e){return e.value}));return o?f.every(h):f.some(h)},this.isFieldTouched=function(e){return i.warningUnhooked(),i.isFieldsTouched([e])},this.isFieldsValidating=function(e){i.warningUnhooked();var t=i.getFieldEntities();if(!e)return t.some((function(e){return e.isFieldValidating()}));var n=e.map(F.XK);return t.some((function(e){var t=e.getNamePath();return(0,F.Ah)(n,t)&&e.isFieldValidating()}))},this.isFieldValidating=function(e){return i.warningUnhooked(),i.isFieldsValidating([e])},this.resetWithFieldInitialValue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new v.A,n=i.getFieldEntities(!0);n.forEach((function(e){var i=e.props.initialValue,n=e.getNamePath();if(void 0!==i){var r=t.get(n)||new Set;r.add({entity:e,value:i}),t.set(n,r)}}));var r;e.entities?r=e.entities:e.namePathList?(r=[],e.namePathList.forEach((function(e){var i,n=t.get(e);n&&(i=r).push.apply(i,(0,s.A)((0,s.A)(n).map((function(e){return e.entity}))))}))):r=n,r.forEach((function(n){if(void 0!==n.props.initialValue){var r=n.getNamePath();if(void 0!==i.getInitialValue(r))(0,u.Ay)(!1,"Form already set 'initialValues' with path '".concat(r.join("."),"'. Field can not overwrite it."));else{var a=t.get(r);if(a&&a.size>1)(0,u.Ay)(!1,"Multiple Field with path '".concat(r.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(a){var l=i.getFieldValue(r);e.skipExist&&void 0!==l||i.updateStore((0,F.KY)(i.store,r,(0,s.A)(a)[0].value))}}}}))},this.resetFields=function(e){i.warningUnhooked();var t=i.store;if(!e)return i.updateStore((0,f.h)(i.initialValues)),i.resetWithFieldInitialValue(),i.notifyObservers(t,null,{type:"reset"}),void i.notifyWatch();var n=e.map(F.XK);n.forEach((function(e){var t=i.getInitialValue(e);i.updateStore((0,F.KY)(i.store,e,t))})),i.resetWithFieldInitialValue({namePathList:n}),i.notifyObservers(t,n,{type:"reset"}),i.notifyWatch(n)},this.setFields=function(e){i.warningUnhooked();var t=i.store,n=[];e.forEach((function(e){var r=e.name,s=(0,a.A)(e,p),l=(0,F.XK)(r);n.push(l),"value"in s&&i.updateStore((0,F.KY)(i.store,l,s.value)),i.notifyObservers(t,[l],{type:"setField",data:e})})),i.notifyWatch(n)},this.getFields=function(){return i.getFieldEntities(!0).map((function(e){var t=e.getNamePath(),n=e.getMeta(),a=(0,r.A)((0,r.A)({},n),{},{name:t,value:i.getFieldValue(t)});return Object.defineProperty(a,"originRCField",{value:!0}),a}))},this.initEntityValue=function(e){var t=e.props.initialValue;if(void 0!==t){var n=e.getNamePath();void 0===(0,F._W)(i.store,n)&&i.updateStore((0,F.KY)(i.store,n,t))}},this.isMergedPreserve=function(e){var t=void 0!==e?e:i.preserve;return null==t||t},this.registerField=function(e){i.fieldEntities.push(e);var t=e.getNamePath();if(i.notifyWatch([t]),void 0!==e.props.initialValue){var n=i.store;i.resetWithFieldInitialValue({entities:[e],skipExist:!0}),i.notifyObservers(n,[e.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(n,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(i.fieldEntities=i.fieldEntities.filter((function(t){return t!==e})),!i.isMergedPreserve(r)&&(!n||a.length>1)){var s=n?void 0:i.getInitialValue(t);if(t.length&&i.getFieldValue(t)!==s&&i.fieldEntities.every((function(e){return!(0,F.Am)(e.getNamePath(),t)}))){var l=i.store;i.updateStore((0,F.KY)(l,t,s,!0)),i.notifyObservers(l,[t],{type:"remove"}),i.triggerDependenciesUpdate(l,t)}}i.notifyWatch([t])}},this.dispatch=function(e){switch(e.type){case"updateValue":var t=e.namePath,n=e.value;i.updateValue(t,n);break;case"validateField":var r=e.namePath,a=e.triggerName;i.validateFields([r],{triggerName:a})}},this.notifyObservers=function(e,t,n){if(i.subscribable){var a=(0,r.A)((0,r.A)({},n),{},{store:i.getFieldsValue(!0)});i.getFieldEntities().forEach((function(i){(0,i.onStoreChange)(e,t,a)}))}else i.forceRootUpdate()},this.triggerDependenciesUpdate=function(e,t){var n=i.getDependencyChildrenFields(t);return n.length&&i.validateFields(n),i.notifyObservers(e,n,{type:"dependenciesUpdate",relatedFields:[t].concat((0,s.A)(n))}),n},this.updateValue=function(e,t){var n=(0,F.XK)(e),r=i.store;i.updateStore((0,F.KY)(i.store,n,t)),i.notifyObservers(r,[n],{type:"valueUpdate",source:"internal"}),i.notifyWatch([n]);var a=i.triggerDependenciesUpdate(r,n),l=i.callbacks.onValuesChange;l&&l((0,F.fm)(i.store,[n]),i.getFieldsValue());i.triggerOnFieldsChange([n].concat((0,s.A)(a)))},this.setFieldsValue=function(e){i.warningUnhooked();var t=i.store;if(e){var n=(0,f.h)(i.store,e);i.updateStore(n)}i.notifyObservers(t,null,{type:"valueUpdate",source:"external"}),i.notifyWatch()},this.setFieldValue=function(e,t){i.setFields([{name:e,value:t}])},this.getDependencyChildrenFields=function(e){var t=new Set,n=[],r=new v.A;i.getFieldEntities().forEach((function(e){(e.props.dependencies||[]).forEach((function(t){var i=(0,F.XK)(t);r.update(i,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return t.add(e),t}))}))}));return function e(i){(r.get(i)||new Set).forEach((function(i){if(!t.has(i)){t.add(i);var r=i.getNamePath();i.isFieldDirty()&&r.length&&(n.push(r),e(r))}}))}(e),n},this.triggerOnFieldsChange=function(e,t){var n=i.callbacks.onFieldsChange;if(n){var r=i.getFields();if(t){var a=new v.A;t.forEach((function(e){var t=e.name,i=e.errors;a.set(t,i)})),r.forEach((function(e){e.errors=a.get(e.name)||e.errors}))}var s=r.filter((function(t){var i=t.name;return(0,F.Ah)(e,i)}));s.length&&n(s,r)}},this.validateFields=function(e,t){var n,a;i.warningUnhooked(),Array.isArray(e)||"string"==typeof e||"string"==typeof t?(n=e,a=t):a=e;var l=!!n,o=l?n.map(F.XK):[],u=[],d=String(Date.now()),c=new Set;i.getFieldEntities(!0).forEach((function(e){var t;if(l||o.push(e.getNamePath()),(null===(t=a)||void 0===t?void 0:t.recursive)&&l){var h=e.getNamePath();h.every((function(e,t){return n[t]===e||void 0===n[t]}))&&o.push(h)}if(e.props.rules&&e.props.rules.length){var f=e.getNamePath();if(c.add(f.join(d)),!l||(0,F.Ah)(o,f)){var v=e.validateRules((0,r.A)({validateMessages:(0,r.A)((0,r.A)({},g.y),i.validateMessages)},a));u.push(v.then((function(){return{name:f,errors:[],warnings:[]}})).catch((function(e){var t,i=[],n=[];return null===(t=e.forEach)||void 0===t||t.call(e,(function(e){var t=e.rule.warningOnly,r=e.errors;t?n.push.apply(n,(0,s.A)(r)):i.push.apply(i,(0,s.A)(r))})),i.length?Promise.reject({name:f,errors:i,warnings:n}):{name:f,errors:i,warnings:n}})))}}}));var f=(0,h.O)(u);i.lastValidatePromise=f,f.catch((function(e){return e})).then((function(e){var t=e.map((function(e){return e.name}));i.notifyObservers(i.store,t,{type:"validateFinish"}),i.triggerOnFieldsChange(t,e)}));var v=f.then((function(){return i.lastValidatePromise===f?Promise.resolve(i.getFieldsValue(o)):Promise.reject([])})).catch((function(e){var t=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:i.getFieldsValue(o),errorFields:t,outOfDate:i.lastValidatePromise!==f})}));v.catch((function(e){return e}));var p=o.filter((function(e){return c.has(e.join(d))}));return i.triggerOnFieldsChange(p),v},this.submit=function(){i.warningUnhooked(),i.validateFields().then((function(e){var t=i.callbacks.onFinish;if(t)try{t(e)}catch(e){console.error(e)}})).catch((function(e){var t=i.callbacks.onFinishFailed;t&&t(e)}))},this.forceRootUpdate=t}));const V=function(e){var t=d.useRef(),i=d.useState({}),r=(0,n.A)(i,2)[1];if(!t.current)if(e)t.current=e;else{var a=new m((function(){r({})}));t.current=a.getForm()}return[t.current]}}}]);